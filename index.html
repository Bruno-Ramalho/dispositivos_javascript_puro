<html>
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="./style.css" />
    </head>
    <body>

        <h1>Personagens Star Wars</h1>
        <div class="container">
            <p class="carregamento">Carregando...</p>
        </div>

        <div id="cadastro" class="js-escondido">
            <form class="criar-contato-form">
              <h1>Criar novo contato</h1>
              <label for="name">Nome: </label>
              <input type="text" name="nome" id="jsNome" />
              <label for="telefone">Telefone: </label>
              <input type="text" name="telefone" id="jsTelefone" />
              <label for="foto">Foto: </label>
              <input type="text" name="foto" id="jsFoto" />
              <button id="jsVoltarLista" class="voltar" type="button">Voltar</button>
              <button id="jsCadastrar" class="cadastrar" type="button">Cadastrar</button>
            </form>
        </div>

        <div>
            <button>Próxima</button>
        </div>
        <script>
            var carregamento = document.querySelector('.carregamento');
            var container = document.querySelector('.container');
            async function getPeople() 
            {
            const response = await fetch('https://swapi.dev/api/people/?page=1',{
                method: 'GET'
            });
                return await response.json();
            }
            getPeople().then(response =>
            {
            carregamento.classList.add('js-escondido');
                
                response.results.map(function(val){
                    container.innerHTML+=`
                    <div class="nomePessoa">`+val.name+`
                        <button onclick="excluir(this.parentElement)">Excluir</button>
                        <button onclick="editar(this.parentElement)">Editar</button>
                        <div style="display:none" class="detalhes" >
                            <p id="altura">Altura: `+val.height+`</p>
                            <p id="massa">Massa: `+val.mass+`</p>
                            <p id="corCabelo">Cor do cabelo: `+val.hair_color+`</p>
                            <p id="corPele">Cor da pele: `+val.skin_color+`</p>
                            <p id="corOlhos">Cor dos Olhos: `+val.eye_color+`</p>
                            <p id="anoNascimento">Ano de nascimento: `+val.birth_year+`</p>
                            <p id="genero">Gênero: `+val.gender+`</p>
                        </div>
                        <hr>
                    </div>`;
                })
                var pessoa = document.querySelectorAll('.nomePessoa');
                for(var i=0;i<pessoa.length;i++)
                {
                    pessoa[i].addEventListener('click',function(t)
                    {
                        if( t.target.querySelector('.detalhes').style.display == "none")
                        {
                            t.target.querySelector('.detalhes').style.display = "block";
                        }else
                        {
                            t.target.querySelector('.detalhes').style.display = "none";
                        }
                    })
                }
            }).catch(erro=>{
                    console.log("Houve um erro:");
                    carregamento.classList.add('js-escondido');
                    container.innerHTML+=`<p>Houve um erro ao acessar a API: `+erro+`</p>`
            });
            function excluir(elem){
                elem.remove()
            }
            function editar(elem){
                console.log("clicou");
                conole.log(elem);
            }
            e
                /*
            fetch('https://swapi.dev/api/people/?page=1',{
                method: 'GET'
            })
            .then(response => response.json())
            .then(function(json){
                var container = document.querySelector('.container');

                json.reslts.map()
            })
            */
        </script>
      </body>
</html>